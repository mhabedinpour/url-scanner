function qt(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}var $,He;function We(){if(He)return $;He=1;var E="\0",v="\0",f="";class u{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(r){r&&(this._isDirected=Object.hasOwn(r,"directed")?r.directed:!0,this._isMultigraph=Object.hasOwn(r,"multigraph")?r.multigraph:!1,this._isCompound=Object.hasOwn(r,"compound")?r.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[v]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(r){return this._label=r,this}graph(){return this._label}setDefaultNodeLabel(r){return this._defaultNodeLabelFn=r,typeof r!="function"&&(this._defaultNodeLabelFn=()=>r),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var r=this;return this.nodes().filter(t=>Object.keys(r._in[t]).length===0)}sinks(){var r=this;return this.nodes().filter(t=>Object.keys(r._out[t]).length===0)}setNodes(r,t){var d=arguments,h=this;return r.forEach(function(w){d.length>1?h.setNode(w,t):h.setNode(w)}),this}setNode(r,t){return Object.hasOwn(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=t),this):(this._nodes[r]=arguments.length>1?t:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=v,this._children[r]={},this._children[v][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)}node(r){return this._nodes[r]}hasNode(r){return Object.hasOwn(this._nodes,r)}removeNode(r){var t=this;if(Object.hasOwn(this._nodes,r)){var d=h=>t.removeEdge(t._edgeObjs[h]);delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],this.children(r).forEach(function(h){t.setParent(h)}),delete this._children[r]),Object.keys(this._in[r]).forEach(d),delete this._in[r],delete this._preds[r],Object.keys(this._out[r]).forEach(d),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this}setParent(r,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t===void 0)t=v;else{t+="";for(var d=t;d!==void 0;d=this.parent(d))if(d===r)throw new Error("Setting "+t+" as parent of "+r+" would create a cycle");this.setNode(t)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=t,this._children[t][r]=!0,this}_removeFromParentsChildList(r){delete this._children[this._parent[r]][r]}parent(r){if(this._isCompound){var t=this._parent[r];if(t!==v)return t}}children(r=v){if(this._isCompound){var t=this._children[r];if(t)return Object.keys(t)}else{if(r===v)return this.nodes();if(this.hasNode(r))return[]}}predecessors(r){var t=this._preds[r];if(t)return Object.keys(t)}successors(r){var t=this._sucs[r];if(t)return Object.keys(t)}neighbors(r){var t=this.predecessors(r);if(t){const h=new Set(t);for(var d of this.successors(r))h.add(d);return Array.from(h.values())}}isLeaf(r){var t;return this.isDirected()?t=this.successors(r):t=this.neighbors(r),t.length===0}filterNodes(r){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var d=this;Object.entries(this._nodes).forEach(function([j,c]){r(j)&&t.setNode(j,c)}),Object.values(this._edgeObjs).forEach(function(j){t.hasNode(j.v)&&t.hasNode(j.w)&&t.setEdge(j,d.edge(j))});var h={};function w(j){var c=d.parent(j);return c===void 0||t.hasNode(c)?(h[j]=c,c):c in h?h[c]:w(c)}return this._isCompound&&t.nodes().forEach(j=>t.setParent(j,w(j))),t}setDefaultEdgeLabel(r){return this._defaultEdgeLabelFn=r,typeof r!="function"&&(this._defaultEdgeLabelFn=()=>r),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(r,t){var d=this,h=arguments;return r.reduce(function(w,j){return h.length>1?d.setEdge(w,j,t):d.setEdge(w,j),j}),this}setEdge(){var r,t,d,h,w=!1,j=arguments[0];typeof j=="object"&&j!==null&&"v"in j?(r=j.v,t=j.w,d=j.name,arguments.length===2&&(h=arguments[1],w=!0)):(r=j,t=arguments[1],d=arguments[3],arguments.length>2&&(h=arguments[2],w=!0)),r=""+r,t=""+t,d!==void 0&&(d=""+d);var c=e(this._isDirected,r,t,d);if(Object.hasOwn(this._edgeLabels,c))return w&&(this._edgeLabels[c]=h),this;if(d!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(t),this._edgeLabels[c]=w?h:this._defaultEdgeLabelFn(r,t,d);var O=o(this._isDirected,r,t,d);return r=O.v,t=O.w,Object.freeze(O),this._edgeObjs[c]=O,s(this._preds[t],r),s(this._sucs[r],t),this._in[t][c]=O,this._out[r][c]=O,this._edgeCount++,this}edge(r,t,d){var h=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,d);return this._edgeLabels[h]}edgeAsObj(){const r=this.edge(...arguments);return typeof r!="object"?{label:r}:r}hasEdge(r,t,d){var h=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,d);return Object.hasOwn(this._edgeLabels,h)}removeEdge(r,t,d){var h=arguments.length===1?n(this._isDirected,arguments[0]):e(this._isDirected,r,t,d),w=this._edgeObjs[h];return w&&(r=w.v,t=w.w,delete this._edgeLabels[h],delete this._edgeObjs[h],i(this._preds[t],r),i(this._sucs[r],t),delete this._in[t][h],delete this._out[r][h],this._edgeCount--),this}inEdges(r,t){var d=this._in[r];if(d){var h=Object.values(d);return t?h.filter(w=>w.v===t):h}}outEdges(r,t){var d=this._out[r];if(d){var h=Object.values(d);return t?h.filter(w=>w.w===t):h}}nodeEdges(r,t){var d=this.inEdges(r,t);if(d)return d.concat(this.outEdges(r,t))}}function s(a,r){a[r]?a[r]++:a[r]=1}function i(a,r){--a[r]||delete a[r]}function e(a,r,t,d){var h=""+r,w=""+t;if(!a&&h>w){var j=h;h=w,w=j}return h+f+w+f+(d===void 0?E:d)}function o(a,r,t,d){var h=""+r,w=""+t;if(!a&&h>w){var j=h;h=w,w=j}var c={v:h,w};return d&&(c.name=d),c}function n(a,r){return e(a,r.v,r.w,r.name)}return $=u,$}var J,Xe;function Qr(){return Xe||(Xe=1,J="2.2.4"),J}var K,Qe;function $r(){return Qe||(Qe=1,K={Graph:We(),version:Qr()}),K}var Z,$e;function Jr(){if($e)return Z;$e=1;var E=We();Z={write:v,read:s};function v(i){var e={options:{directed:i.isDirected(),multigraph:i.isMultigraph(),compound:i.isCompound()},nodes:f(i),edges:u(i)};return i.graph()!==void 0&&(e.value=structuredClone(i.graph())),e}function f(i){return i.nodes().map(function(e){var o=i.node(e),n=i.parent(e),a={v:e};return o!==void 0&&(a.value=o),n!==void 0&&(a.parent=n),a})}function u(i){return i.edges().map(function(e){var o=i.edge(e),n={v:e.v,w:e.w};return e.name!==void 0&&(n.name=e.name),o!==void 0&&(n.value=o),n})}function s(i){var e=new E(i.options).setGraph(i.value);return i.nodes.forEach(function(o){e.setNode(o.v,o.value),o.parent&&e.setParent(o.v,o.parent)}),i.edges.forEach(function(o){e.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),e}return Z}var ee,Je;function Kr(){if(Je)return ee;Je=1,ee=E;function E(v){var f={},u=[],s;function i(e){Object.hasOwn(f,e)||(f[e]=!0,s.push(e),v.successors(e).forEach(i),v.predecessors(e).forEach(i))}return v.nodes().forEach(function(e){s=[],i(e),s.length&&u.push(s)}),u}return ee}var re,Ke;function Ar(){if(Ke)return re;Ke=1;class E{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(f){return f.key})}has(f){return Object.hasOwn(this._keyIndices,f)}priority(f){var u=this._keyIndices[f];if(u!==void 0)return this._arr[u].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(f,u){var s=this._keyIndices;if(f=String(f),!Object.hasOwn(s,f)){var i=this._arr,e=i.length;return s[f]=e,i.push({key:f,priority:u}),this._decrease(e),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var f=this._arr.pop();return delete this._keyIndices[f.key],this._heapify(0),f.key}decrease(f,u){var s=this._keyIndices[f];if(u>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+f+" Old: "+this._arr[s].priority+" New: "+u);this._arr[s].priority=u,this._decrease(s)}_heapify(f){var u=this._arr,s=2*f,i=s+1,e=f;s<u.length&&(e=u[s].priority<u[e].priority?s:e,i<u.length&&(e=u[i].priority<u[e].priority?i:e),e!==f&&(this._swap(f,e),this._heapify(e)))}_decrease(f){for(var u=this._arr,s=u[f].priority,i;f!==0&&(i=f>>1,!(u[i].priority<s));)this._swap(f,i),f=i}_swap(f,u){var s=this._arr,i=this._keyIndices,e=s[f],o=s[u];s[f]=o,s[u]=e,i[o.key]=f,i[e.key]=u}}return re=E,re}var te,Ze;function Vr(){if(Ze)return te;Ze=1;var E=Ar();te=f;var v=()=>1;function f(s,i,e,o){return u(s,String(i),e||v,o||function(n){return s.outEdges(n)})}function u(s,i,e,o){var n={},a=new E,r,t,d=function(h){var w=h.v!==r?h.v:h.w,j=n[w],c=e(h),O=t.distance+c;if(c<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+h+" Weight: "+c);O<j.distance&&(j.distance=O,j.predecessor=r,a.decrease(w,O))};for(s.nodes().forEach(function(h){var w=h===i?0:Number.POSITIVE_INFINITY;n[h]={distance:w},a.add(h,w)});a.size()>0&&(r=a.removeMin(),t=n[r],t.distance!==Number.POSITIVE_INFINITY);)o(r).forEach(d);return n}return te}var ne,er;function Zr(){if(er)return ne;er=1;var E=Vr();ne=v;function v(f,u,s){return f.nodes().reduce(function(i,e){return i[e]=E(f,e,u,s),i},{})}return ne}var ie,rr;function Br(){if(rr)return ie;rr=1,ie=E;function E(v){var f=0,u=[],s={},i=[];function e(o){var n=s[o]={onStack:!0,lowlink:f,index:f++};if(u.push(o),v.successors(o).forEach(function(t){Object.hasOwn(s,t)?s[t].onStack&&(n.lowlink=Math.min(n.lowlink,s[t].index)):(e(t),n.lowlink=Math.min(n.lowlink,s[t].lowlink))}),n.lowlink===n.index){var a=[],r;do r=u.pop(),s[r].onStack=!1,a.push(r);while(o!==r);i.push(a)}}return v.nodes().forEach(function(o){Object.hasOwn(s,o)||e(o)}),i}return ie}var ae,tr;function et(){if(tr)return ae;tr=1;var E=Br();ae=v;function v(f){return E(f).filter(function(u){return u.length>1||u.length===1&&f.hasEdge(u[0],u[0])})}return ae}var se,nr;function rt(){if(nr)return se;nr=1,se=v;var E=()=>1;function v(u,s,i){return f(u,s||E,i||function(e){return u.outEdges(e)})}function f(u,s,i){var e={},o=u.nodes();return o.forEach(function(n){e[n]={},e[n][n]={distance:0},o.forEach(function(a){n!==a&&(e[n][a]={distance:Number.POSITIVE_INFINITY})}),i(n).forEach(function(a){var r=a.v===n?a.w:a.v,t=s(a);e[n][r]={distance:t,predecessor:n}})}),o.forEach(function(n){var a=e[n];o.forEach(function(r){var t=e[r];o.forEach(function(d){var h=t[n],w=a[d],j=t[d],c=h.distance+w.distance;c<j.distance&&(j.distance=c,j.predecessor=w.predecessor)})})}),e}return se}var oe,ir;function Wr(){if(ir)return oe;ir=1;function E(f){var u={},s={},i=[];function e(o){if(Object.hasOwn(s,o))throw new v;Object.hasOwn(u,o)||(s[o]=!0,u[o]=!0,f.predecessors(o).forEach(e),delete s[o],i.push(o))}if(f.sinks().forEach(e),Object.keys(u).length!==f.nodeCount())throw new v;return i}class v extends Error{constructor(){super(...arguments)}}return oe=E,E.CycleException=v,oe}var ue,ar;function tt(){if(ar)return ue;ar=1;var E=Wr();ue=v;function v(f){try{E(f)}catch(u){if(u instanceof E.CycleException)return!1;throw u}return!0}return ue}var de,sr;function Yr(){if(sr)return de;sr=1,de=E;function E(s,i,e){Array.isArray(i)||(i=[i]);var o=s.isDirected()?t=>s.successors(t):t=>s.neighbors(t),n=e==="post"?v:f,a=[],r={};return i.forEach(t=>{if(!s.hasNode(t))throw new Error("Graph does not have node: "+t);n(t,o,r,a)}),a}function v(s,i,e,o){for(var n=[[s,!1]];n.length>0;){var a=n.pop();a[1]?o.push(a[0]):Object.hasOwn(e,a[0])||(e[a[0]]=!0,n.push([a[0],!0]),u(i(a[0]),r=>n.push([r,!1])))}}function f(s,i,e,o){for(var n=[s];n.length>0;){var a=n.pop();Object.hasOwn(e,a)||(e[a]=!0,o.push(a),u(i(a),r=>n.push(r)))}}function u(s,i){for(var e=s.length;e--;)i(s[e],e,s);return s}return de}var le,or;function nt(){if(or)return le;or=1;var E=Yr();le=v;function v(f,u){return E(f,u,"post")}return le}var he,ur;function it(){if(ur)return he;ur=1;var E=Yr();he=v;function v(f,u){return E(f,u,"pre")}return he}var fe,dr;function at(){if(dr)return fe;dr=1;var E=We(),v=Ar();fe=f;function f(u,s){var i=new E,e={},o=new v,n;function a(t){var d=t.v===n?t.w:t.v,h=o.priority(d);if(h!==void 0){var w=s(t);w<h&&(e[d]=n,o.decrease(d,w))}}if(u.nodeCount()===0)return i;u.nodes().forEach(function(t){o.add(t,Number.POSITIVE_INFINITY),i.setNode(t)}),o.decrease(u.nodes()[0],0);for(var r=!1;o.size()>0;){if(n=o.removeMin(),Object.hasOwn(e,n))i.setEdge(n,e[n]);else{if(r)throw new Error("Input graph is not connected: "+u);r=!0}u.nodeEdges(n).forEach(a)}return i}return fe}var ce,lr;function st(){return lr||(lr=1,ce={components:Kr(),dijkstra:Vr(),dijkstraAll:Zr(),findCycles:et(),floydWarshall:rt(),isAcyclic:tt(),postorder:nt(),preorder:it(),prim:at(),tarjan:Br(),topsort:Wr()}),ce}var pe,hr;function W(){if(hr)return pe;hr=1;var E=$r();return pe={Graph:E.Graph,json:Jr(),alg:st(),version:E.version},pe}var me,fr;function ot(){if(fr)return me;fr=1;class E{constructor(){let s={};s._next=s._prev=s,this._sentinel=s}dequeue(){let s=this._sentinel,i=s._prev;if(i!==s)return v(i),i}enqueue(s){let i=this._sentinel;s._prev&&s._next&&v(s),s._next=i._next,i._next._prev=s,i._next=s,s._prev=i}toString(){let s=[],i=this._sentinel,e=i._prev;for(;e!==i;)s.push(JSON.stringify(e,f)),e=e._prev;return"["+s.join(", ")+"]"}}function v(u){u._prev._next=u._next,u._next._prev=u._prev,delete u._next,delete u._prev}function f(u,s){if(u!=="_next"&&u!=="_prev")return s}return me=E,me}var be,cr;function ut(){if(cr)return be;cr=1;let E=W().Graph,v=ot();be=u;let f=()=>1;function u(a,r){if(a.nodeCount()<=1)return[];let t=e(a,r||f);return s(t.graph,t.buckets,t.zeroIdx).flatMap(h=>a.outEdges(h.v,h.w))}function s(a,r,t){let d=[],h=r[r.length-1],w=r[0],j;for(;a.nodeCount();){for(;j=w.dequeue();)i(a,r,t,j);for(;j=h.dequeue();)i(a,r,t,j);if(a.nodeCount()){for(let c=r.length-2;c>0;--c)if(j=r[c].dequeue(),j){d=d.concat(i(a,r,t,j,!0));break}}}return d}function i(a,r,t,d,h){let w=h?[]:void 0;return a.inEdges(d.v).forEach(j=>{let c=a.edge(j),O=a.node(j.v);h&&w.push({v:j.v,w:j.w}),O.out-=c,o(r,t,O)}),a.outEdges(d.v).forEach(j=>{let c=a.edge(j),O=j.w,p=a.node(O);p.in-=c,o(r,t,p)}),a.removeNode(d.v),w}function e(a,r){let t=new E,d=0,h=0;a.nodes().forEach(c=>{t.setNode(c,{v:c,in:0,out:0})}),a.edges().forEach(c=>{let O=t.edge(c.v,c.w)||0,p=r(c),k=O+p;t.setEdge(c.v,c.w,k),h=Math.max(h,t.node(c.v).out+=p),d=Math.max(d,t.node(c.w).in+=p)});let w=n(h+d+3).map(()=>new v),j=d+1;return t.nodes().forEach(c=>{o(w,j,t.node(c))}),{graph:t,buckets:w,zeroIdx:j}}function o(a,r,t){t.out?t.in?a[t.out-t.in+r].enqueue(t):a[a.length-1].enqueue(t):a[0].enqueue(t)}function n(a){const r=[];for(let t=0;t<a;t++)r.push(t);return r}return be}var ve,pr;function F(){if(pr)return ve;pr=1;let E=W().Graph;ve={addBorderNode:r,addDummyNode:v,applyWithChunking:h,asNonCompoundGraph:u,buildLayerMatrix:o,intersectRect:e,mapValues:x,maxRank:w,normalizeRanks:n,notime:O,partition:j,pick:R,predecessorWeights:i,range:C,removeEmptyRanks:a,simplify:f,successorWeights:s,time:c,uniqueId:k,zipObject:L};function v(l,m,g,y){for(var I=y;l.hasNode(I);)I=k(y);return g.dummy=m,l.setNode(I,g),I}function f(l){let m=new E().setGraph(l.graph());return l.nodes().forEach(g=>m.setNode(g,l.node(g))),l.edges().forEach(g=>{let y=m.edge(g.v,g.w)||{weight:0,minlen:1},I=l.edge(g);m.setEdge(g.v,g.w,{weight:y.weight+I.weight,minlen:Math.max(y.minlen,I.minlen)})}),m}function u(l){let m=new E({multigraph:l.isMultigraph()}).setGraph(l.graph());return l.nodes().forEach(g=>{l.children(g).length||m.setNode(g,l.node(g))}),l.edges().forEach(g=>{m.setEdge(g,l.edge(g))}),m}function s(l){let m=l.nodes().map(g=>{let y={};return l.outEdges(g).forEach(I=>{y[I.w]=(y[I.w]||0)+l.edge(I).weight}),y});return L(l.nodes(),m)}function i(l){let m=l.nodes().map(g=>{let y={};return l.inEdges(g).forEach(I=>{y[I.v]=(y[I.v]||0)+l.edge(I).weight}),y});return L(l.nodes(),m)}function e(l,m){let g=l.x,y=l.y,I=m.x-g,T=m.y-y,S=l.width/2,D=l.height/2;if(!I&&!T)throw new Error("Not possible to find intersection inside of the rectangle");let Y,z;return Math.abs(T)*S>Math.abs(I)*D?(T<0&&(D=-D),Y=D*I/T,z=D):(I<0&&(S=-S),Y=S,z=S*T/I),{x:g+Y,y:y+z}}function o(l){let m=C(w(l)+1).map(()=>[]);return l.nodes().forEach(g=>{let y=l.node(g),I=y.rank;I!==void 0&&(m[I][y.order]=g)}),m}function n(l){let m=l.nodes().map(y=>{let I=l.node(y).rank;return I===void 0?Number.MAX_VALUE:I}),g=h(Math.min,m);l.nodes().forEach(y=>{let I=l.node(y);Object.hasOwn(I,"rank")&&(I.rank-=g)})}function a(l){let m=l.nodes().map(S=>l.node(S).rank),g=h(Math.min,m),y=[];l.nodes().forEach(S=>{let D=l.node(S).rank-g;y[D]||(y[D]=[]),y[D].push(S)});let I=0,T=l.graph().nodeRankFactor;Array.from(y).forEach((S,D)=>{S===void 0&&D%T!==0?--I:S!==void 0&&I&&S.forEach(Y=>l.node(Y).rank+=I)})}function r(l,m,g,y){let I={width:0,height:0};return arguments.length>=4&&(I.rank=g,I.order=y),v(l,"border",I,m)}function t(l,m=d){const g=[];for(let y=0;y<l.length;y+=m){const I=l.slice(y,y+m);g.push(I)}return g}const d=65535;function h(l,m){if(m.length>d){const g=t(m);return l.apply(null,g.map(y=>l.apply(null,y)))}else return l.apply(null,m)}function w(l){const g=l.nodes().map(y=>{let I=l.node(y).rank;return I===void 0?Number.MIN_VALUE:I});return h(Math.max,g)}function j(l,m){let g={lhs:[],rhs:[]};return l.forEach(y=>{m(y)?g.lhs.push(y):g.rhs.push(y)}),g}function c(l,m){let g=Date.now();try{return m()}finally{console.log(l+" time: "+(Date.now()-g)+"ms")}}function O(l,m){return m()}let p=0;function k(l){var m=++p;return l+(""+m)}function C(l,m,g=1){m==null&&(m=l,l=0);let y=T=>T<m;g<0&&(y=T=>m<T);const I=[];for(let T=l;y(T);T+=g)I.push(T);return I}function R(l,m){const g={};for(const y of m)l[y]!==void 0&&(g[y]=l[y]);return g}function x(l,m){let g=m;return typeof m=="string"&&(g=y=>y[m]),Object.entries(l).reduce((y,[I,T])=>(y[I]=g(T,I),y),{})}function L(l,m){return l.reduce((g,y,I)=>(g[y]=m[I],g),{})}return ve}var we,mr;function dt(){if(mr)return we;mr=1;let E=ut(),v=F().uniqueId;we={run:f,undo:s};function f(i){(i.graph().acyclicer==="greedy"?E(i,o(i)):u(i)).forEach(n=>{let a=i.edge(n);i.removeEdge(n),a.forwardName=n.name,a.reversed=!0,i.setEdge(n.w,n.v,a,v("rev"))});function o(n){return a=>n.edge(a).weight}}function u(i){let e=[],o={},n={};function a(r){Object.hasOwn(n,r)||(n[r]=!0,o[r]=!0,i.outEdges(r).forEach(t=>{Object.hasOwn(o,t.w)?e.push(t):a(t.w)}),delete o[r])}return i.nodes().forEach(a),e}function s(i){i.edges().forEach(e=>{let o=i.edge(e);if(o.reversed){i.removeEdge(e);let n=o.forwardName;delete o.reversed,delete o.forwardName,i.setEdge(e.w,e.v,o,n)}})}return we}var ge,br;function lt(){if(br)return ge;br=1;let E=F();ge={run:v,undo:u};function v(s){s.graph().dummyChains=[],s.edges().forEach(i=>f(s,i))}function f(s,i){let e=i.v,o=s.node(e).rank,n=i.w,a=s.node(n).rank,r=i.name,t=s.edge(i),d=t.labelRank;if(a===o+1)return;s.removeEdge(i);let h,w,j;for(j=0,++o;o<a;++j,++o)t.points=[],w={width:0,height:0,edgeLabel:t,edgeObj:i,rank:o},h=E.addDummyNode(s,"edge",w,"_d"),o===d&&(w.width=t.width,w.height=t.height,w.dummy="edge-label",w.labelpos=t.labelpos),s.setEdge(e,h,{weight:t.weight},r),j===0&&s.graph().dummyChains.push(h),e=h;s.setEdge(e,n,{weight:t.weight},r)}function u(s){s.graph().dummyChains.forEach(i=>{let e=s.node(i),o=e.edgeLabel,n;for(s.setEdge(e.edgeObj,o);e.dummy;)n=s.successors(i)[0],s.removeNode(i),o.points.push({x:e.x,y:e.y}),e.dummy==="edge-label"&&(o.x=e.x,o.y=e.y,o.width=e.width,o.height=e.height),i=n,e=s.node(i)})}return ge}var Ee,vr;function H(){if(vr)return Ee;vr=1;const{applyWithChunking:E}=F();Ee={longestPath:v,slack:f};function v(u){var s={};function i(e){var o=u.node(e);if(Object.hasOwn(s,e))return o.rank;s[e]=!0;let n=u.outEdges(e).map(r=>r==null?Number.POSITIVE_INFINITY:i(r.w)-u.edge(r).minlen);var a=E(Math.min,n);return a===Number.POSITIVE_INFINITY&&(a=0),o.rank=a}u.sources().forEach(i)}function f(u,s){return u.node(s.w).rank-u.node(s.v).rank-u.edge(s).minlen}return Ee}var _e,wr;function zr(){if(wr)return _e;wr=1;var E=W().Graph,v=H().slack;_e=f;function f(e){var o=new E({directed:!1}),n=e.nodes()[0],a=e.nodeCount();o.setNode(n,{});for(var r,t;u(o,e)<a;)r=s(o,e),t=o.hasNode(r.v)?v(e,r):-v(e,r),i(o,e,t);return o}function u(e,o){function n(a){o.nodeEdges(a).forEach(r=>{var t=r.v,d=a===t?r.w:t;!e.hasNode(d)&&!v(o,r)&&(e.setNode(d,{}),e.setEdge(a,d,{}),n(d))})}return e.nodes().forEach(n),e.nodeCount()}function s(e,o){return o.edges().reduce((a,r)=>{let t=Number.POSITIVE_INFINITY;return e.hasNode(r.v)!==e.hasNode(r.w)&&(t=v(o,r)),t<a[0]?[t,r]:a},[Number.POSITIVE_INFINITY,null])[1]}function i(e,o,n){e.nodes().forEach(a=>o.node(a).rank+=n)}return _e}var ye,gr;function ht(){if(gr)return ye;gr=1;var E=zr(),v=H().slack,f=H().longestPath,u=W().alg.preorder,s=W().alg.postorder,i=F().simplify;ye=e,e.initLowLimValues=r,e.initCutValues=o,e.calcCutValue=a,e.leaveEdge=d,e.enterEdge=h,e.exchangeEdges=w;function e(p){p=i(p),f(p);var k=E(p);r(k),o(k,p);for(var C,R;C=d(k);)R=h(k,p,C),w(k,p,C,R)}function o(p,k){var C=s(p,p.nodes());C=C.slice(0,C.length-1),C.forEach(R=>n(p,k,R))}function n(p,k,C){var R=p.node(C),x=R.parent;p.edge(C,x).cutvalue=a(p,k,C)}function a(p,k,C){var R=p.node(C),x=R.parent,L=!0,l=k.edge(C,x),m=0;return l||(L=!1,l=k.edge(x,C)),m=l.weight,k.nodeEdges(C).forEach(g=>{var y=g.v===C,I=y?g.w:g.v;if(I!==x){var T=y===L,S=k.edge(g).weight;if(m+=T?S:-S,c(p,C,I)){var D=p.edge(C,I).cutvalue;m+=T?-D:D}}}),m}function r(p,k){arguments.length<2&&(k=p.nodes()[0]),t(p,{},1,k)}function t(p,k,C,R,x){var L=C,l=p.node(R);return k[R]=!0,p.neighbors(R).forEach(m=>{Object.hasOwn(k,m)||(C=t(p,k,C,m,R))}),l.low=L,l.lim=C++,x?l.parent=x:delete l.parent,C}function d(p){return p.edges().find(k=>p.edge(k).cutvalue<0)}function h(p,k,C){var R=C.v,x=C.w;k.hasEdge(R,x)||(R=C.w,x=C.v);var L=p.node(R),l=p.node(x),m=L,g=!1;L.lim>l.lim&&(m=l,g=!0);var y=k.edges().filter(I=>g===O(p,p.node(I.v),m)&&g!==O(p,p.node(I.w),m));return y.reduce((I,T)=>v(k,T)<v(k,I)?T:I)}function w(p,k,C,R){var x=C.v,L=C.w;p.removeEdge(x,L),p.setEdge(R.v,R.w,{}),r(p),o(p,k),j(p,k)}function j(p,k){var C=p.nodes().find(x=>!k.node(x).parent),R=u(p,C);R=R.slice(1),R.forEach(x=>{var L=p.node(x).parent,l=k.edge(x,L),m=!1;l||(l=k.edge(L,x),m=!0),k.node(x).rank=k.node(L).rank+(m?l.minlen:-l.minlen)})}function c(p,k,C){return p.hasEdge(k,C)}function O(p,k,C){return C.low<=k.lim&&k.lim<=C.lim}return ye}var ke,Er;function ft(){if(Er)return ke;Er=1;var E=H(),v=E.longestPath,f=zr(),u=ht();ke=s;function s(n){var a=n.graph().ranker;if(a instanceof Function)return a(n);switch(n.graph().ranker){case"network-simplex":o(n);break;case"tight-tree":e(n);break;case"longest-path":i(n);break;case"none":break;default:o(n)}}var i=v;function e(n){v(n),f(n)}function o(n){u(n)}return ke}var Oe,_r;function ct(){if(_r)return Oe;_r=1,Oe=E;function E(u){let s=f(u);u.graph().dummyChains.forEach(i=>{let e=u.node(i),o=e.edgeObj,n=v(u,s,o.v,o.w),a=n.path,r=n.lca,t=0,d=a[t],h=!0;for(;i!==o.w;){if(e=u.node(i),h){for(;(d=a[t])!==r&&u.node(d).maxRank<e.rank;)t++;d===r&&(h=!1)}if(!h){for(;t<a.length-1&&u.node(d=a[t+1]).minRank<=e.rank;)t++;d=a[t]}u.setParent(i,d),i=u.successors(i)[0]}})}function v(u,s,i,e){let o=[],n=[],a=Math.min(s[i].low,s[e].low),r=Math.max(s[i].lim,s[e].lim),t,d;t=i;do t=u.parent(t),o.push(t);while(t&&(s[t].low>a||r>s[t].lim));for(d=t,t=e;(t=u.parent(t))!==d;)n.push(t);return{path:o.concat(n.reverse()),lca:d}}function f(u){let s={},i=0;function e(o){let n=i;u.children(o).forEach(e),s[o]={low:n,lim:i++}}return u.children().forEach(e),s}return Oe}var Ne,yr;function pt(){if(yr)return Ne;yr=1;let E=F();Ne={run:v,cleanup:i};function v(e){let o=E.addDummyNode(e,"root",{},"_root"),n=u(e),a=Object.values(n),r=E.applyWithChunking(Math.max,a)-1,t=2*r+1;e.graph().nestingRoot=o,e.edges().forEach(h=>e.edge(h).minlen*=t);let d=s(e)+1;e.children().forEach(h=>f(e,o,t,d,r,n,h)),e.graph().nodeRankFactor=t}function f(e,o,n,a,r,t,d){let h=e.children(d);if(!h.length){d!==o&&e.setEdge(o,d,{weight:0,minlen:n});return}let w=E.addBorderNode(e,"_bt"),j=E.addBorderNode(e,"_bb"),c=e.node(d);e.setParent(w,d),c.borderTop=w,e.setParent(j,d),c.borderBottom=j,h.forEach(O=>{f(e,o,n,a,r,t,O);let p=e.node(O),k=p.borderTop?p.borderTop:O,C=p.borderBottom?p.borderBottom:O,R=p.borderTop?a:2*a,x=k!==C?1:r-t[d]+1;e.setEdge(w,k,{weight:R,minlen:x,nestingEdge:!0}),e.setEdge(C,j,{weight:R,minlen:x,nestingEdge:!0})}),e.parent(d)||e.setEdge(o,w,{weight:0,minlen:r+t[d]})}function u(e){var o={};function n(a,r){var t=e.children(a);t&&t.length&&t.forEach(d=>n(d,r+1)),o[a]=r}return e.children().forEach(a=>n(a,1)),o}function s(e){return e.edges().reduce((o,n)=>o+e.edge(n).weight,0)}function i(e){var o=e.graph();e.removeNode(o.nestingRoot),delete o.nestingRoot,e.edges().forEach(n=>{var a=e.edge(n);a.nestingEdge&&e.removeEdge(n)})}return Ne}var Ce,kr;function mt(){if(kr)return Ce;kr=1;let E=F();Ce=v;function v(u){function s(i){let e=u.children(i),o=u.node(i);if(e.length&&e.forEach(s),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let n=o.minRank,a=o.maxRank+1;n<a;++n)f(u,"borderLeft","_bl",i,o,n),f(u,"borderRight","_br",i,o,n)}}u.children().forEach(s)}function f(u,s,i,e,o,n){let a={width:0,height:0,rank:n,borderType:s},r=o[s][n-1],t=E.addDummyNode(u,"border",a,i);o[s][n]=t,u.setParent(t,e),r&&u.setEdge(r,t,{weight:1})}return Ce}var Ie,Or;function bt(){if(Or)return Ie;Or=1,Ie={adjust:E,undo:v};function E(n){let a=n.graph().rankdir.toLowerCase();(a==="lr"||a==="rl")&&f(n)}function v(n){let a=n.graph().rankdir.toLowerCase();(a==="bt"||a==="rl")&&s(n),(a==="lr"||a==="rl")&&(e(n),f(n))}function f(n){n.nodes().forEach(a=>u(n.node(a))),n.edges().forEach(a=>u(n.edge(a)))}function u(n){let a=n.width;n.width=n.height,n.height=a}function s(n){n.nodes().forEach(a=>i(n.node(a))),n.edges().forEach(a=>{let r=n.edge(a);r.points.forEach(i),Object.hasOwn(r,"y")&&i(r)})}function i(n){n.y=-n.y}function e(n){n.nodes().forEach(a=>o(n.node(a))),n.edges().forEach(a=>{let r=n.edge(a);r.points.forEach(o),Object.hasOwn(r,"x")&&o(r)})}function o(n){let a=n.x;n.x=n.y,n.y=a}return Ie}var je,Nr;function vt(){if(Nr)return je;Nr=1;let E=F();je=v;function v(f){let u={},s=f.nodes().filter(r=>!f.children(r).length),i=s.map(r=>f.node(r).rank),e=E.applyWithChunking(Math.max,i),o=E.range(e+1).map(()=>[]);function n(r){if(u[r])return;u[r]=!0;let t=f.node(r);o[t.rank].push(r),f.successors(r).forEach(n)}return s.sort((r,t)=>f.node(r).rank-f.node(t).rank).forEach(n),o}return je}var Re,Cr;function wt(){if(Cr)return Re;Cr=1;let E=F().zipObject;Re=v;function v(u,s){let i=0;for(let e=1;e<s.length;++e)i+=f(u,s[e-1],s[e]);return i}function f(u,s,i){let e=E(i,i.map((d,h)=>h)),o=s.flatMap(d=>u.outEdges(d).map(h=>({pos:e[h.w],weight:u.edge(h).weight})).sort((h,w)=>h.pos-w.pos)),n=1;for(;n<i.length;)n<<=1;let a=2*n-1;n-=1;let r=new Array(a).fill(0),t=0;return o.forEach(d=>{let h=d.pos+n;r[h]+=d.weight;let w=0;for(;h>0;)h%2&&(w+=r[h+1]),h=h-1>>1,r[h]+=d.weight;t+=d.weight*w}),t}return Re}var xe,Ir;function gt(){if(Ir)return xe;Ir=1,xe=E;function E(v,f=[]){return f.map(u=>{let s=v.inEdges(u);if(s.length){let i=s.reduce((e,o)=>{let n=v.edge(o),a=v.node(o.v);return{sum:e.sum+n.weight*a.order,weight:e.weight+n.weight}},{sum:0,weight:0});return{v:u,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:u}})}return xe}var qe,jr;function Et(){if(jr)return qe;jr=1;let E=F();qe=v;function v(s,i){let e={};s.forEach((n,a)=>{let r=e[n.v]={indegree:0,in:[],out:[],vs:[n.v],i:a};n.barycenter!==void 0&&(r.barycenter=n.barycenter,r.weight=n.weight)}),i.edges().forEach(n=>{let a=e[n.v],r=e[n.w];a!==void 0&&r!==void 0&&(r.indegree++,a.out.push(e[n.w]))});let o=Object.values(e).filter(n=>!n.indegree);return f(o)}function f(s){let i=[];function e(n){return a=>{a.merged||(a.barycenter===void 0||n.barycenter===void 0||a.barycenter>=n.barycenter)&&u(n,a)}}function o(n){return a=>{a.in.push(n),--a.indegree===0&&s.push(a)}}for(;s.length;){let n=s.pop();i.push(n),n.in.reverse().forEach(e(n)),n.out.forEach(o(n))}return i.filter(n=>!n.merged).map(n=>E.pick(n,["vs","i","barycenter","weight"]))}function u(s,i){let e=0,o=0;s.weight&&(e+=s.barycenter*s.weight,o+=s.weight),i.weight&&(e+=i.barycenter*i.weight,o+=i.weight),s.vs=i.vs.concat(s.vs),s.barycenter=e/o,s.weight=o,s.i=Math.min(i.i,s.i),i.merged=!0}return qe}var Le,Rr;function _t(){if(Rr)return Le;Rr=1;let E=F();Le=v;function v(s,i){let e=E.partition(s,w=>Object.hasOwn(w,"barycenter")),o=e.lhs,n=e.rhs.sort((w,j)=>j.i-w.i),a=[],r=0,t=0,d=0;o.sort(u(!!i)),d=f(a,n,d),o.forEach(w=>{d+=w.vs.length,a.push(w.vs),r+=w.barycenter*w.weight,t+=w.weight,d=f(a,n,d)});let h={vs:a.flat(!0)};return t&&(h.barycenter=r/t,h.weight=t),h}function f(s,i,e){let o;for(;i.length&&(o=i[i.length-1]).i<=e;)i.pop(),s.push(o.vs),e++;return e}function u(s){return(i,e)=>i.barycenter<e.barycenter?-1:i.barycenter>e.barycenter?1:s?e.i-i.i:i.i-e.i}return Le}var Te,xr;function yt(){if(xr)return Te;xr=1;let E=gt(),v=Et(),f=_t();Te=u;function u(e,o,n,a){let r=e.children(o),t=e.node(o),d=t?t.borderLeft:void 0,h=t?t.borderRight:void 0,w={};d&&(r=r.filter(p=>p!==d&&p!==h));let j=E(e,r);j.forEach(p=>{if(e.children(p.v).length){let k=u(e,p.v,n,a);w[p.v]=k,Object.hasOwn(k,"barycenter")&&i(p,k)}});let c=v(j,n);s(c,w);let O=f(c,a);if(d&&(O.vs=[d,O.vs,h].flat(!0),e.predecessors(d).length)){let p=e.node(e.predecessors(d)[0]),k=e.node(e.predecessors(h)[0]);Object.hasOwn(O,"barycenter")||(O.barycenter=0,O.weight=0),O.barycenter=(O.barycenter*O.weight+p.order+k.order)/(O.weight+2),O.weight+=2}return O}function s(e,o){e.forEach(n=>{n.vs=n.vs.flatMap(a=>o[a]?o[a].vs:a)})}function i(e,o){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+o.barycenter*o.weight)/(e.weight+o.weight),e.weight+=o.weight):(e.barycenter=o.barycenter,e.weight=o.weight)}return Te}var Se,qr;function kt(){if(qr)return Se;qr=1;let E=W().Graph,v=F();Se=f;function f(s,i,e){let o=u(s),n=new E({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(a=>s.node(a));return s.nodes().forEach(a=>{let r=s.node(a),t=s.parent(a);(r.rank===i||r.minRank<=i&&i<=r.maxRank)&&(n.setNode(a),n.setParent(a,t||o),s[e](a).forEach(d=>{let h=d.v===a?d.w:d.v,w=n.edge(h,a),j=w!==void 0?w.weight:0;n.setEdge(h,a,{weight:s.edge(d).weight+j})}),Object.hasOwn(r,"minRank")&&n.setNode(a,{borderLeft:r.borderLeft[i],borderRight:r.borderRight[i]}))}),n}function u(s){for(var i;s.hasNode(i=v.uniqueId("_root")););return i}return Se}var Me,Lr;function Ot(){if(Lr)return Me;Lr=1,Me=E;function E(v,f,u){let s={},i;u.forEach(e=>{let o=v.parent(e),n,a;for(;o;){if(n=v.parent(o),n?(a=s[n],s[n]=o):(a=i,i=o),a&&a!==o){f.setEdge(a,o);return}o=n}})}return Me}var Pe,Tr;function Nt(){if(Tr)return Pe;Tr=1;let E=vt(),v=wt(),f=yt(),u=kt(),s=Ot(),i=W().Graph,e=F();Pe=o;function o(t,d){if(d&&typeof d.customOrder=="function"){d.customOrder(t,o);return}let h=e.maxRank(t),w=n(t,e.range(1,h+1),"inEdges"),j=n(t,e.range(h-1,-1,-1),"outEdges"),c=E(t);if(r(t,c),d&&d.disableOptimalOrderHeuristic)return;let O=Number.POSITIVE_INFINITY,p;for(let k=0,C=0;C<4;++k,++C){a(k%2?w:j,k%4>=2),c=e.buildLayerMatrix(t);let R=v(t,c);R<O&&(C=0,p=Object.assign({},c),O=R)}r(t,p)}function n(t,d,h){return d.map(function(w){return u(t,w,h)})}function a(t,d){let h=new i;t.forEach(function(w){let j=w.graph().root,c=f(w,j,h,d);c.vs.forEach((O,p)=>w.node(O).order=p),s(w,h,c.vs)})}function r(t,d){Object.values(d).forEach(h=>h.forEach((w,j)=>t.node(w).order=j))}return Pe}var De,Sr;function Ct(){if(Sr)return De;Sr=1;let E=W().Graph,v=F();De={positionX:h,findType1Conflicts:f,findType2Conflicts:u,addConflict:i,hasConflict:e,verticalAlignment:o,horizontalCompaction:n,alignCoordinates:t,findSmallestWidthAlignment:r,balance:d};function f(c,O){let p={};function k(C,R){let x=0,L=0,l=C.length,m=R[R.length-1];return R.forEach((g,y)=>{let I=s(c,g),T=I?c.node(I).order:l;(I||g===m)&&(R.slice(L,y+1).forEach(S=>{c.predecessors(S).forEach(D=>{let Y=c.node(D),z=Y.order;(z<x||T<z)&&!(Y.dummy&&c.node(S).dummy)&&i(p,D,S)})}),L=y+1,x=T)}),R}return O.length&&O.reduce(k),p}function u(c,O){let p={};function k(R,x,L,l,m){let g;v.range(x,L).forEach(y=>{g=R[y],c.node(g).dummy&&c.predecessors(g).forEach(I=>{let T=c.node(I);T.dummy&&(T.order<l||T.order>m)&&i(p,I,g)})})}function C(R,x){let L=-1,l,m=0;return x.forEach((g,y)=>{if(c.node(g).dummy==="border"){let I=c.predecessors(g);I.length&&(l=c.node(I[0]).order,k(x,m,y,L,l),m=y,L=l)}k(x,m,x.length,l,R.length)}),x}return O.length&&O.reduce(C),p}function s(c,O){if(c.node(O).dummy)return c.predecessors(O).find(p=>c.node(p).dummy)}function i(c,O,p){if(O>p){let C=O;O=p,p=C}let k=c[O];k||(c[O]=k={}),k[p]=!0}function e(c,O,p){if(O>p){let k=O;O=p,p=k}return!!c[O]&&Object.hasOwn(c[O],p)}function o(c,O,p,k){let C={},R={},x={};return O.forEach(L=>{L.forEach((l,m)=>{C[l]=l,R[l]=l,x[l]=m})}),O.forEach(L=>{let l=-1;L.forEach(m=>{let g=k(m);if(g.length){g=g.sort((I,T)=>x[I]-x[T]);let y=(g.length-1)/2;for(let I=Math.floor(y),T=Math.ceil(y);I<=T;++I){let S=g[I];R[m]===m&&l<x[S]&&!e(p,m,S)&&(R[S]=m,R[m]=C[m]=C[S],l=x[S])}}})}),{root:C,align:R}}function n(c,O,p,k,C){let R={},x=a(c,O,p,C),L=C?"borderLeft":"borderRight";function l(y,I){let T=x.nodes(),S=T.pop(),D={};for(;S;)D[S]?y(S):(D[S]=!0,T.push(S),T=T.concat(I(S))),S=T.pop()}function m(y){R[y]=x.inEdges(y).reduce((I,T)=>Math.max(I,R[T.v]+x.edge(T)),0)}function g(y){let I=x.outEdges(y).reduce((S,D)=>Math.min(S,R[D.w]-x.edge(D)),Number.POSITIVE_INFINITY),T=c.node(y);I!==Number.POSITIVE_INFINITY&&T.borderType!==L&&(R[y]=Math.max(R[y],I))}return l(m,x.predecessors.bind(x)),l(g,x.successors.bind(x)),Object.keys(k).forEach(y=>R[y]=R[p[y]]),R}function a(c,O,p,k){let C=new E,R=c.graph(),x=w(R.nodesep,R.edgesep,k);return O.forEach(L=>{let l;L.forEach(m=>{let g=p[m];if(C.setNode(g),l){var y=p[l],I=C.edge(y,g);C.setEdge(y,g,Math.max(x(c,m,l),I||0))}l=m})}),C}function r(c,O){return Object.values(O).reduce((p,k)=>{let C=Number.NEGATIVE_INFINITY,R=Number.POSITIVE_INFINITY;Object.entries(k).forEach(([L,l])=>{let m=j(c,L)/2;C=Math.max(l+m,C),R=Math.min(l-m,R)});const x=C-R;return x<p[0]&&(p=[x,k]),p},[Number.POSITIVE_INFINITY,null])[1]}function t(c,O){let p=Object.values(O),k=v.applyWithChunking(Math.min,p),C=v.applyWithChunking(Math.max,p);["u","d"].forEach(R=>{["l","r"].forEach(x=>{let L=R+x,l=c[L];if(l===O)return;let m=Object.values(l),g=k-v.applyWithChunking(Math.min,m);x!=="l"&&(g=C-v.applyWithChunking(Math.max,m)),g&&(c[L]=v.mapValues(l,y=>y+g))})})}function d(c,O){return v.mapValues(c.ul,(p,k)=>{if(O)return c[O.toLowerCase()][k];{let C=Object.values(c).map(R=>R[k]).sort((R,x)=>R-x);return(C[1]+C[2])/2}})}function h(c){let O=v.buildLayerMatrix(c),p=Object.assign(f(c,O),u(c,O)),k={},C;["u","d"].forEach(x=>{C=x==="u"?O:Object.values(O).reverse(),["l","r"].forEach(L=>{L==="r"&&(C=C.map(y=>Object.values(y).reverse()));let l=(x==="u"?c.predecessors:c.successors).bind(c),m=o(c,C,p,l),g=n(c,C,m.root,m.align,L==="r");L==="r"&&(g=v.mapValues(g,y=>-y)),k[x+L]=g})});let R=r(c,k);return t(k,R),d(k,c.graph().align)}function w(c,O,p){return(k,C,R)=>{let x=k.node(C),L=k.node(R),l=0,m;if(l+=x.width/2,Object.hasOwn(x,"labelpos"))switch(x.labelpos.toLowerCase()){case"l":m=-x.width/2;break;case"r":m=x.width/2;break}if(m&&(l+=p?m:-m),m=0,l+=(x.dummy?O:c)/2,l+=(L.dummy?O:c)/2,l+=L.width/2,Object.hasOwn(L,"labelpos"))switch(L.labelpos.toLowerCase()){case"l":m=L.width/2;break;case"r":m=-L.width/2;break}return m&&(l+=p?m:-m),m=0,l}}function j(c,O){return c.node(O).width}return De}var Ge,Mr;function It(){if(Mr)return Ge;Mr=1;let E=F(),v=Ct().positionX;Ge=f;function f(s){s=E.asNonCompoundGraph(s),u(s),Object.entries(v(s)).forEach(([i,e])=>s.node(i).x=e)}function u(s){let i=E.buildLayerMatrix(s),e=s.graph().ranksep,o=0;i.forEach(n=>{const a=n.reduce((r,t)=>{const d=s.node(t).height;return r>d?r:d},0);n.forEach(r=>s.node(r).y=o+a/2),o+=a+e})}return Ge}var Fe,Pr;function jt(){if(Pr)return Fe;Pr=1;let E=dt(),v=lt(),f=ft(),u=F().normalizeRanks,s=ct(),i=F().removeEmptyRanks,e=pt(),o=mt(),n=bt(),a=Nt(),r=It(),t=F(),d=W().Graph;Fe=h;function h(b,_){let N=_&&_.debugTiming?t.time:t.notime;N("layout",()=>{let q=N("  buildLayoutGraph",()=>l(b));N("  runLayout",()=>w(q,N,_)),N("  updateInputGraph",()=>j(b,q))})}function w(b,_,N){_("    makeSpaceForEdgeLabels",()=>m(b)),_("    removeSelfEdges",()=>Ur(b)),_("    acyclic",()=>E.run(b)),_("    nestingGraph.run",()=>e.run(b)),_("    rank",()=>f(t.asNonCompoundGraph(b))),_("    injectEdgeLabelProxies",()=>g(b)),_("    removeEmptyRanks",()=>i(b)),_("    nestingGraph.cleanup",()=>e.cleanup(b)),_("    normalizeRanks",()=>u(b)),_("    assignRankMinMax",()=>y(b)),_("    removeEdgeLabelProxies",()=>I(b)),_("    normalize.run",()=>v.run(b)),_("    parentDummyChains",()=>s(b)),_("    addBorderSegments",()=>o(b)),_("    order",()=>a(b,N)),_("    insertSelfEdges",()=>Hr(b)),_("    adjustCoordinateSystem",()=>n.adjust(b)),_("    position",()=>r(b)),_("    positionSelfEdges",()=>Xr(b)),_("    removeBorderNodes",()=>z(b)),_("    normalize.undo",()=>v.undo(b)),_("    fixupEdgeLabelCoords",()=>D(b)),_("    undoCoordinateSystem",()=>n.undo(b)),_("    translateGraph",()=>T(b)),_("    assignNodeIntersects",()=>S(b)),_("    reversePoints",()=>Y(b)),_("    acyclic.undo",()=>E.undo(b))}function j(b,_){b.nodes().forEach(N=>{let q=b.node(N),M=_.node(N);q&&(q.x=M.x,q.y=M.y,q.rank=M.rank,_.children(N).length&&(q.width=M.width,q.height=M.height))}),b.edges().forEach(N=>{let q=b.edge(N),M=_.edge(N);q.points=M.points,Object.hasOwn(M,"x")&&(q.x=M.x,q.y=M.y)}),b.graph().width=_.graph().width,b.graph().height=_.graph().height}let c=["nodesep","edgesep","ranksep","marginx","marginy"],O={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},p=["acyclicer","ranker","rankdir","align"],k=["width","height","rank"],C={width:0,height:0},R=["minlen","weight","width","height","labeloffset"],x={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},L=["labelpos"];function l(b){let _=new d({multigraph:!0,compound:!0}),N=Q(b.graph());return _.setGraph(Object.assign({},O,X(N,c),t.pick(N,p))),b.nodes().forEach(q=>{let M=Q(b.node(q));const P=X(M,k);Object.keys(C).forEach(G=>{P[G]===void 0&&(P[G]=C[G])}),_.setNode(q,P),_.setParent(q,b.parent(q))}),b.edges().forEach(q=>{let M=Q(b.edge(q));_.setEdge(q,Object.assign({},x,X(M,R),t.pick(M,L)))}),_}function m(b){let _=b.graph();_.ranksep/=2,b.edges().forEach(N=>{let q=b.edge(N);q.minlen*=2,q.labelpos.toLowerCase()!=="c"&&(_.rankdir==="TB"||_.rankdir==="BT"?q.width+=q.labeloffset:q.height+=q.labeloffset)})}function g(b){b.edges().forEach(_=>{let N=b.edge(_);if(N.width&&N.height){let q=b.node(_.v),P={rank:(b.node(_.w).rank-q.rank)/2+q.rank,e:_};t.addDummyNode(b,"edge-proxy",P,"_ep")}})}function y(b){let _=0;b.nodes().forEach(N=>{let q=b.node(N);q.borderTop&&(q.minRank=b.node(q.borderTop).rank,q.maxRank=b.node(q.borderBottom).rank,_=Math.max(_,q.maxRank))}),b.graph().maxRank=_}function I(b){b.nodes().forEach(_=>{let N=b.node(_);N.dummy==="edge-proxy"&&(b.edge(N.e).labelRank=N.rank,b.removeNode(_))})}function T(b){let _=Number.POSITIVE_INFINITY,N=0,q=Number.POSITIVE_INFINITY,M=0,P=b.graph(),G=P.marginx||0,V=P.marginy||0;function Ye(B){let A=B.x,U=B.y,ze=B.width,Ue=B.height;_=Math.min(_,A-ze/2),N=Math.max(N,A+ze/2),q=Math.min(q,U-Ue/2),M=Math.max(M,U+Ue/2)}b.nodes().forEach(B=>Ye(b.node(B))),b.edges().forEach(B=>{let A=b.edge(B);Object.hasOwn(A,"x")&&Ye(A)}),_-=G,q-=V,b.nodes().forEach(B=>{let A=b.node(B);A.x-=_,A.y-=q}),b.edges().forEach(B=>{let A=b.edge(B);A.points.forEach(U=>{U.x-=_,U.y-=q}),Object.hasOwn(A,"x")&&(A.x-=_),Object.hasOwn(A,"y")&&(A.y-=q)}),P.width=N-_+G,P.height=M-q+V}function S(b){b.edges().forEach(_=>{let N=b.edge(_),q=b.node(_.v),M=b.node(_.w),P,G;N.points?(P=N.points[0],G=N.points[N.points.length-1]):(N.points=[],P=M,G=q),N.points.unshift(t.intersectRect(q,P)),N.points.push(t.intersectRect(M,G))})}function D(b){b.edges().forEach(_=>{let N=b.edge(_);if(Object.hasOwn(N,"x"))switch((N.labelpos==="l"||N.labelpos==="r")&&(N.width-=N.labeloffset),N.labelpos){case"l":N.x-=N.width/2+N.labeloffset;break;case"r":N.x+=N.width/2+N.labeloffset;break}})}function Y(b){b.edges().forEach(_=>{let N=b.edge(_);N.reversed&&N.points.reverse()})}function z(b){b.nodes().forEach(_=>{if(b.children(_).length){let N=b.node(_),q=b.node(N.borderTop),M=b.node(N.borderBottom),P=b.node(N.borderLeft[N.borderLeft.length-1]),G=b.node(N.borderRight[N.borderRight.length-1]);N.width=Math.abs(G.x-P.x),N.height=Math.abs(M.y-q.y),N.x=P.x+N.width/2,N.y=q.y+N.height/2}}),b.nodes().forEach(_=>{b.node(_).dummy==="border"&&b.removeNode(_)})}function Ur(b){b.edges().forEach(_=>{if(_.v===_.w){var N=b.node(_.v);N.selfEdges||(N.selfEdges=[]),N.selfEdges.push({e:_,label:b.edge(_)}),b.removeEdge(_)}})}function Hr(b){var _=t.buildLayerMatrix(b);_.forEach(N=>{var q=0;N.forEach((M,P)=>{var G=b.node(M);G.order=P+q,(G.selfEdges||[]).forEach(V=>{t.addDummyNode(b,"selfedge",{width:V.label.width,height:V.label.height,rank:G.rank,order:P+ ++q,e:V.e,label:V.label},"_se")}),delete G.selfEdges})})}function Xr(b){b.nodes().forEach(_=>{var N=b.node(_);if(N.dummy==="selfedge"){var q=b.node(N.e.v),M=q.x+q.width/2,P=q.y,G=N.x-M,V=q.height/2;b.setEdge(N.e,N.label),b.removeNode(_),N.label.points=[{x:M+2*G/3,y:P-V},{x:M+5*G/6,y:P-V},{x:M+G,y:P},{x:M+5*G/6,y:P+V},{x:M+2*G/3,y:P+V}],N.label.x=N.x,N.label.y=N.y}})}function X(b,_){return t.mapValues(t.pick(b,_),Number)}function Q(b){var _={};return b&&Object.entries(b).forEach(([N,q])=>{typeof N=="string"&&(N=N.toLowerCase()),_[N]=q}),_}return Fe}var Ae,Dr;function Rt(){if(Dr)return Ae;Dr=1;let E=F(),v=W().Graph;Ae={debugOrdering:f};function f(u){let s=E.buildLayerMatrix(u),i=new v({compound:!0,multigraph:!0}).setGraph({});return u.nodes().forEach(e=>{i.setNode(e,{label:e}),i.setParent(e,"layer"+u.node(e).rank)}),u.edges().forEach(e=>i.setEdge(e.v,e.w,{},e.name)),s.forEach((e,o)=>{let n="layer"+o;i.setNode(n,{rank:"same"}),e.reduce((a,r)=>(i.setEdge(a,r,{style:"invis"}),r))}),i}return Ae}var Ve,Gr;function xt(){return Gr||(Gr=1,Ve="1.1.5"),Ve}var Be,Fr;function Lt(){return Fr||(Fr=1,Be={graphlib:W(),layout:jt(),debug:Rt(),util:{time:F().time,notime:F().notime},version:xt()}),Be}export{qt as g,Lt as r};
